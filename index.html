
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Dependencies &#8212; Formulae 0.2.0 documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/blank.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting started" href="notebooks/getting_started.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="#">
  <img src="_static/formulae_small.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="notebooks/getting_started.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="api_reference.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="internals.html">
  Internals
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/bambinos/formulae" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://pypi.org/project/formulae/" rel="noopener" target="_blank" title="PyPi">
            <span><i class="fas fa-box"></i></span>
            <label class="sr-only">PyPi</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Dependencies
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#history-related-projects-and-credits">
   History, related projects and credits
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contributors">
   Contributors
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contents">
   Contents
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#indices">
   Indices
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <a class="reference internal image-reference" href="_images/formulae_large.png"><img alt="formulae" src="_images/formulae_large.png" style="width: 250px;" /></a>
<hr class="docutils" />
<p><a class="reference external" href="https://badge.fury.io/py/formulae"><img alt="PyPI version" src="https://badge.fury.io/py/formulae.svg" /></a>
<a class="reference external" href="https://codecov.io/gh/bambinos/formulae"><img alt="Coverage" src="https://codecov.io/gh/bambinos/formulae/branch/master/graph/badge.svg" /></a>
<a class="reference external" href="https://github.com/ambv/black"><img alt="Black" src="https://img.shields.io/badge/code%20style-black-000000.svg" /></a></p>
<p>formulae is a Python library that implements Wilkinson’s formulas for mixed-effects models.</p>
<p>This package has been written to make it easier to specify models with group effects in <a class="reference external" href="https://github.com/bambinos/bambi">Bambi</a>,
a package that makes it easy to work with Bayesian GLMMs in Python, but it could be used
independently as a backend for another library.
The approach in this library is to extend classical statistical formulas in a similar way than in
R package <a class="reference external" href="https://CRAN.R-project.org/package=lme4">lme4</a>.</p>
<section id="dependencies">
<h1>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h1>
<p>formulae requires a working Python interpreter (3.7+) and the libraries NumPy, SciPy and pandas with
versions specified in the (see
<a class="reference external" href="https://github.com/bambinos/formulae/blob/master/requirements.txt">requirements.txt</a> for version
information).</p>
</section>
<section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>The latest release of formulae can be installed using pip:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install formulae
</pre></div>
</div>
<p>Alternatively, if you want the development version of the package you can install from GitHub:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install git+https://github.com/bambinos/formulae.git
</pre></div>
</div>
</section>
<section id="history-related-projects-and-credits">
<h1>History, related projects and credits<a class="headerlink" href="#history-related-projects-and-credits" title="Permalink to this headline">¶</a></h1>
<p>formulae was built specifically to satisfy the need for a more concise manner to specify mixed
effects models in Bambi. Before formulae, Bambi used to rely on
<a class="reference external" href="https://patsy.readthedocs.io/">Patsy</a> to parse model formulas and build design matrices.
While Patsy is great, flexible, and solid, it does not support formulas with mixed model effects.
At that time, Bambi developers would ask users for random effects to be passed in a list separated
from the model formula which was cumbersome for models with several terms.</p>
<p>It could have been possible to attempt to modify Patsy to make it work with mixed effects formulas.
But lack of familiarity with the internals of the library and the motivation to write something
completely custom to our needs predominated and formulae development started.</p>
<p>From the very beginning, formulae was built with Bambi needs in mind. That’s why its main function,
<code class="docutils literal notranslate"><span class="pre">design_matrices()</span></code>, does not return an object that can be directly used as a design matrix, but
as a wrapper for classes containing the design matrices as well as useful methods and attributes.
These methods and attributes are extensively used within Bambi to build internal objects that give
shape to Bambi models.</p>
<p>formulae was officially incorporated into Bambi a couple of months after its inception. Several
updates, bug fixes, and improvements took place from that moment. While there is still much work to
be done, the current shape of formulae does at good job at meeting needs in Bambi.</p>
<p>Future efforts are more likely to be concentrated around adding new features and making the library
more solid in general, instead of converting formulae into a high-level library that can be used as
a direct replacement of Patsy.</p>
<p>But formulae couldn’t have existed if it wasn’t for the following projects that served as both
inspiration and source of information</p>
<ul class="simple">
<li><p><a class="reference external" href="https://doi.org/10.2307/2346786">The work where everything started</a>: Wilkinson, G., &amp; Rogers, C. Symbolic Description of Factorial Models for Analysis of Variance. Journal of the Royal Statistics Society 22, pp. 392–399, 1973.</p></li>
<li><p><a class="reference external" href="https://www.r-project.org/">R</a>: Probably the most popular implementation of Wilkinson’s formulas.</p></li>
<li><p><a class="reference external" href="https://CRAN.R-project.org/package=lme4">lme4</a>: For the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator to extend Wilkinson’s formulas to mixed effects models and helpful information on how to compute mixed effects matrices.</p></li>
<li><p><a class="reference external" href="https://patsy.readthedocs.io/">Patsy</a>: The most widely used implementation of Wilkinson’s formulas in Python. Its implementation helped us to write formulae, especially its module and documentation on evaluation environments.</p></li>
<li><p><a class="reference external" href="https://matthewwardrop.github.io/formulaic/">Formulaic</a>: Another implementation of Wilkinson’s formulas in Python that we came across in the middle of this journey. The usage of the backtick operator <code class="docutils literal notranslate"><span class="pre">`</span></code> and the quote operator <code class="docutils literal notranslate"><span class="pre">{</span></code> are taken from this library.</p></li>
</ul>
<p>Finally, if you came here because you only need to obtain design matrices for linear models with
fixed effects, you’d better use Patsy or Formulaic. They are much more friendly and go straight to
the point of returning a design matrix. On the contrary, if you are a developer or someone who needs
to automatically generate design matrices for mixed-effects models, have a try with formulae and
feel free to reach out to us if you have any question or sugerence.</p>
</section>
<section id="contributors">
<h1>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h1>
<p>See the <a class="reference external" href="https://github.com/bambinos/formulae/graphs/contributors">GitHub contributor page</a>.</p>
</section>
<section id="contents">
<h1>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="notebooks/getting_started.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="notebooks/getting_started.html#User-guide">User guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/getting_started.html#Setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/getting_started.html#Creating-and-accessing-design-matrices">Creating and accessing design matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/getting_started.html#Categorical-predictors">Categorical predictors</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/getting_started.html#Adding-interactions">Adding interactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/getting_started.html#Function-calls">Function calls</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/getting_started.html#Built-in-transformations">Built-in transformations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="notebooks/getting_started.html#Suppresing-the-default-intercept">Suppresing the default intercept</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/getting_started.html#Operations-between-terms">Operations between terms</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/getting_started.html#Categorical-responses">Categorical responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/getting_started.html#Group-specific-effects">Group-specific effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/getting_started.html#Evaluating-new-data">Evaluating new data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_reference.html#module-formulae"><code class="xref py py-mod docutils literal notranslate"><span class="pre">formulae</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="api_reference.html#module-formulae.matrices"><code class="xref py py-mod docutils literal notranslate"><span class="pre">formulae.matrices</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Internals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="internals.html#matrices"><code class="xref py py-mod docutils literal notranslate"><span class="pre">matrices</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="internals.html#terms"><code class="xref py py-mod docutils literal notranslate"><span class="pre">terms</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="internals.html#call-resolver"><code class="xref py py-mod docutils literal notranslate"><span class="pre">call_resolver</span></code></a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="indices">
<h1>Indices<a class="headerlink" href="#indices" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
</ul>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='right-next' id="next-link" href="notebooks/getting_started.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Getting started</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, The developers of Bambi.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.1.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>